{
  "schema": {
    "instance_id": "i-0123456789abcdef0",
    "instance_name": "lab-instance-useast1-20170614",
    "pem_file": "./lab-keypair-useast2-test-20170601.pem",
    "pem_name": "lab-keypair-useast2-test-20170601",
    "tag_key": "Env",
    "tag_values": [ "test" ],
    "group_id": "sg-abcd1234",
    "subnet_id": "subnet-abcd1234",
    "documentation": {
      "api": "https://docs.aws.amazon.com/AWSEC2/latest/APIReference/Welcome.html",
      "boto3": "https://boto3.readthedocs.org/en/latest/reference/services/ec2.html#client",
      "limits": "https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html",
      "ec2AMIs": "https://aws.amazon.com/amazon-linux-ami/#Amazon_Linux_AMI_IDs",
      "ecsAMIs": "https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-dg.pdf"
    },
    "endpoints": {
      "ec2": {
        "us-east-1": "ec2.us-east-1.amazonaws.com",
        "us-east-2": "ec2.us-east-2.amazonaws.com",
        "us-west-2": "ec2.us-west-2.amazonaws.com",
        "us-west-1": "ec2.us-west-1.amazonaws.com",
        "eu-west-1": "ec2.eu-west-1.amazonaws.com",
        "eu-central-1": "ec2.eu-central-1.amazonaws.com",
        "ap-southeast-1": "ec2.ap-southeast-1.amazonaws.com",
        "ap-southeast-2": "ec2.ap-southeast-2.amazonaws.com",
        "ap-northeast-1": "ec2.ap-northeast-1.amazonaws.com",
        "sa-east-1": "ec2.sa-east-1.amazonaws.com"
      }
    },
    "instances": {
      "maxPerRegion": {
        "onDemand": "varies",
        "reserved": 20,
        "spot": 20
      },
      "prices": {
        "maxBid": {
          "comparison": "onDemand",
          "multiple": 10
        },
        "onDemand": {
          "lastDate": "2015-10-06",
          "linux": {
            "t2.micro": 0.013,
            "t2.small": 0.026,
            "t2.medium": 0.052,
            "t2.large": 0.104,
            "m4.large": 0.126,
            "m4.xlarge": 0.252,
            "m4.2xlarge": 0.504,
            "m4.4xlarge": 1.008,
            "m4.10xlarge": 2.52,
            "m3.medium": 0.067,
            "m3.large": 0.133,
            "m3.xlarge": 0.266,
            "m3.2xlarge": 0.532,
            "c4.large": 0.11,
            "c4.xlarge": 0.22,
            "c4.2xlarge": 0.441,
            "c4.4xlarge": 0.882,
            "c4.8xlarge": 1.763,
            "c3.large": 0.105,
            "c3.xlarge": 0.21,
            "c3.2xlarge": 0.42,
            "c3.4xlarge": 0.84,
            "c3.8xlarge": 1.68,
            "g2.2xlarge": 0.65,
            "g2.8xlarge": 2.6,
            "r3.large": 0.175,
            "r3.xlarge": 0.35,
            "r3.2xlarge": 0.7,
            "r3.4xlarge": 1.4,
            "r3.8xlarge": 2.8,
            "i2.xlarge":0.853,
            "i2.2xlarge": 1.705,
            "i2.4xlarge": 3.41,
            "i2.8xlarge": 6.82,
            "d2.xlarge": 0.69,
            "d2.2xlarge": 1.38,
            "d2.4xlarge": 2.76,
            "d2.8xlarge": 5.52
          }
        }
      },
      "types": [
        "t2.micro", "t2.small", "t2.medium", "t2.large", "m4.large", "m4.xlarge", "m4.2xlarge", "m4.4xlarge", "m4.10xlarge", "m3.medium", "m3.large", "m3.xlarge", "m3.2xlarge", "c4.large", "c4.xlarge", "c4.2xlarge", "c4.4xlarge", "c4.8xlarge", "c3.large", "c3.xlarge", "c3.2xlarge", "c3.4xlarge", "c3.8xlarge", "r3.large", "r3.xlarge", "r3.2xlarge", "r3.4xlarge", "r3.8xlarge", "i2.xlarge", "i2.2xlarge", "i2.4xlarge", "i2.8xlarge", "d2.xlarge", "d2.2xlarge", "d2.4xlarge", "d2.8xlarge", "g2.2xlarge", "g2.8xlarge" ],
      "volumeTypes": [ "gp2", "io1", "standard" ]
    },
    "images": {
      "maxPerRegion": 0,
      "id": {
        "format": [ "ami-", "abcd1234" ],
        "regEx": [ "0123456789abcdef" ]
      },
      "name": {
        "minLength": 3,
        "maxLength": 128,
        "datatypes": [ "string" ],
        "regEx": [ "aws:", "[^\\w\\-\\._]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      }
    },
    "vpcs": {},
    "subnets": {},
    "keyPairs": {},
    "securityGroups": {
      "id": {
        "format": [ "sg-", "abcd1234" ],
        "regEx": [ "0123456789abcdef" ]
      },
      "name": {
        "minLength": 3,
        "maxLength": 128,
        "datatypes": [ "string" ],
        "regEx": [ "[^\\w\\-_]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      }
    },
    "iamProfile": {
      "name": {
        "minLength": 1,
        "maxLength": 1600,
        "datatypes": [ "string" ],
        "regEx": [ "[^\\w\\-\\._]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      }
    },
    "hostedZones": {
      "format": {
        "hostedZoneID": "ABCDWXYZ67890",
        "domainName": "example.com.",
        "aliasTargets": [ { "key": "string" } ]
      },
      "id": {
        "minLength": 14,
        "maxLength": 0,
        "datatypes": [ "string" ],
        "regEx": [""],
        "charCode": "UTF-8",
        "units": "characters"
      },
      "aliasTarget":{
        "format": {
          "name": "example.com.",
          "dnsName": "dualstack.aws-lb-prod-56749ed4-1743289820.us-east-1.elb.amazonaws.com.",
          "evaluateTargetHealth": false,
          "hostedZoneID": "ABCDWXYZ12345"
        }
      }
    },
    "tags": {
      "required": true,
      "maxNumber": 10,
      "format": { "Key": "string", "Value": "string" },
      "key": {
        "minLength": 1,
        "maxLength": 127,
        "datatypes": [ "string" ],
        "regEx": [ "^aws", "[^\\w\\s\\-\\._]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      },
      "value": {
        "minLength": 1,
        "maxLength": 255,
        "datatypes": [ "string" ],
        "regEx": [ "aws:", "[^\\w\\s\\-\\._:/]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      }
    },
    "initParams": {
      "required": true,
      "format": {
        "imageID": "ami-1234abcd",
        "keyPair": "sample-ec2-key-pair",
        "securityGroupIDs": [ "sg-abcd1234" ],
        "instanceType": "t2.micro",
        "volumeType": "gp2",
        "ebsOptimized": false,
        "instanceMonitoring": false,
        "iamProfileRole": "",
        "tags": [
            { "Key": "UserName", "Value": "ec2-user" },
            { "Key": "Stack", "Value": "build" },
            { "Key": "BuildDate", "Value": "generated-by-start-script" }
        ]
      }
    },
    "launchConfigurations": {
      "maxPerRegion": 100,
      "format": {
        "launchConfigurationName": "aws-lc-useast1-test-2015-10-06-21-53-55",
        "imageID": "ami-abcd1234",
        "snapshotID": "",
        "instanceType": "t2.micro",
        "volumeType": "gp2",
        "ebsOptimized": false,
        "spotPrice": 0,
        "keyPair": "aws-keypair-useast1-prod",
        "securityGroupIDs": [ "sg-abcd1234" ],
        "instanceMonitoring": false,
        "iamProfileRole": ""
      },
      "name": {
        "minLength": 1,
        "maxLength": 255,
        "datatypes": [ "string" ],
        "regEx": [ "[^\\w\\-_]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      }
    },
    "autoScalingConfigurations": {
      "maxPerRegion": 20,
      "format": {
        "autoScalingGroupName": "generated-by-deploy-script",
        "launchConfigurationName": "generated-by-deploy-script",
        "subnetIDs": [ "subnet-abcd1234", "subnet-ef567890" ],
        "minSize": 1,
        "maxSize": 20,
        "desiredCapacity": 1,
        "defaultCooldown": 300,
        "healthCheckType": "EC2",
        "healthCheckGracePeriod": 300,
        "terminationPolicies": [ "Default" ]
      },
      "name": {
        "minLength": 1,
        "maxLength": 255,
        "datatypes": [ "string" ],
        "regEx": [ "[^\\w\\-_]+" ],
        "charCode": "UTF-8",
        "units": "characters"
      },
	  "healthCheckType": [ "EC2", "ELB" ],
	  "terminationPolicies": [ "Default", "OldestInstance", "NewestInstance", "OldestLaunchConfiguration", "ClosestToNextInstanceHour" ]
    },
    "loadBalancers": {
      "maxPerRegion": 20,
      "format": {
        "loadBalancerName": "aws-lb-useast1-test",
        "healthCheckTarget": "HTTP:80/",
        "healthCheckTimeout": 2,
        "healthCheckInterval": 30,
        "healthyThreshold": 2,
        "unhealthyThreshold": 4,
        "subnetIDs": [ "subnet-abcd1234" ],
        "securityGroupIDs": [ "sg-abcd1234" ],
        "sslCertARN": "",
        "listeners": [
          { "publicProtocol": "HTTP", "publicPort": 80, "instanceProtocol": "HTTP", "instancePort": 80 }
        ]
      },
      "name": {
        "minLength": 1,
        "maxLength": 32,
        "datatypes": [ "string" ],
        "regEx": [ "[^a-z0-9\\-]+", "^\\-", "\\-$" ],
        "charCode": "UTF-8",
        "units": "characters"
      },
      "port": {
        "discrete": [ 25, 80, 443, 465, 587 ],
        "range": {
          "minValue": 1024,
          "maxValue": 65535
        }
      },
      "protocol": [ "HTTP", "HTTPS", "TCP", "SSL"],
      "policyAttributeDescriptions": {
        "sslNegotiation": [
  {"AttributeValue": "false", "AttributeName": "Protocol-SSLv2"}, {"AttributeValue": "true", "AttributeName": "Protocol-TLSv1"}, {"AttributeValue": "false", "AttributeName": "Protocol-SSLv3"}, {"AttributeValue": "true", "AttributeName": "Protocol-TLSv1.1"}, {"AttributeValue": "true", "AttributeName": "Protocol-TLSv1.2"}, {"AttributeValue": "true", "AttributeName": "Server-Defined-Cipher-Order"}, {"AttributeValue": "true", "AttributeName": "ECDHE-ECDSA-AES128-GCM-SHA256"}, {"AttributeValue": "true", "AttributeName": "ECDHE-RSA-AES128-GCM-SHA256"}, {"AttributeValue": "true", "AttributeName": "ECDHE-ECDSA-AES128-SHA256"}, {"AttributeValue": "true", "AttributeName": "ECDHE-RSA-AES128-SHA256"}, {"AttributeValue": "true", "AttributeName": "ECDHE-ECDSA-AES128-SHA"}, {"AttributeValue": "true", "AttributeName": "ECDHE-RSA-AES128-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-AES128-SHA"}, {"AttributeValue": "true", "AttributeName": "ECDHE-ECDSA-AES256-GCM-SHA384"}, {"AttributeValue": "true", "AttributeName": "ECDHE-RSA-AES256-GCM-SHA384"}, {"AttributeValue": "true", "AttributeName": "ECDHE-ECDSA-AES256-SHA384"}, {"AttributeValue": "true", "AttributeName": "ECDHE-RSA-AES256-SHA384"}, {"AttributeValue": "true", "AttributeName": "ECDHE-RSA-AES256-SHA"}, {"AttributeValue": "true", "AttributeName": "ECDHE-ECDSA-AES256-SHA"}, {"AttributeValue": "true", "AttributeName": "AES128-GCM-SHA256"}, {"AttributeValue": "true", "AttributeName": "AES128-SHA256"}, {"AttributeValue": "true", "AttributeName": "AES128-SHA"}, {"AttributeValue": "true", "AttributeName": "AES256-GCM-SHA384"}, {"AttributeValue": "true", "AttributeName": "AES256-SHA256"}, {"AttributeValue": "true", "AttributeName": "AES256-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-AES128-SHA"}, {"AttributeValue": "false", "AttributeName": "CAMELLIA128-SHA"}, {"AttributeValue": "false", "AttributeName": "EDH-RSA-DES-CBC3-SHA"}, {"AttributeValue": "true", "AttributeName": "DES-CBC3-SHA"}, {"AttributeValue": "false", "AttributeName": "ECDHE-RSA-RC4-SHA"}, {"AttributeValue": "false", "AttributeName": "RC4-SHA"}, {"AttributeValue": "false", "AttributeName": "ECDHE-ECDSA-RC4-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-AES256-GCM-SHA384"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-AES256-GCM-SHA384"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-AES256-SHA256"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-AES256-SHA256"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-AES256-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-AES256-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-CAMELLIA256-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-CAMELLIA256-SHA"}, {"AttributeValue": "false", "AttributeName": "CAMELLIA256-SHA"}, {"AttributeValue": "false", "AttributeName": "EDH-DSS-DES-CBC3-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-AES128-GCM-SHA256"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-AES128-GCM-SHA256"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-AES128-SHA256"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-AES128-SHA256"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-CAMELLIA128-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-CAMELLIA128-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-AES128-GCM-SHA256"}, {"AttributeValue": "false", "AttributeName": "ADH-AES128-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-AES128-SHA256"}, {"AttributeValue": "false", "AttributeName": "ADH-AES256-GCM-SHA384"}, {"AttributeValue": "false", "AttributeName": "ADH-AES256-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-AES256-SHA256"}, {"AttributeValue": "false", "AttributeName": "ADH-CAMELLIA128-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-CAMELLIA256-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-DES-CBC3-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "ADH-RC4-MD5"}, {"AttributeValue": "false", "AttributeName": "ADH-SEED-SHA"}, {"AttributeValue": "false", "AttributeName": "DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-DSS-SEED-SHA"}, {"AttributeValue": "false", "AttributeName": "DHE-RSA-SEED-SHA"}, {"AttributeValue": "false", "AttributeName": "EDH-DSS-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EDH-RSA-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "IDEA-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "RC4-MD5"}, {"AttributeValue": "false", "AttributeName": "SEED-SHA"}, {"AttributeValue": "false", "AttributeName": "DES-CBC3-MD5"}, {"AttributeValue": "false", "AttributeName": "DES-CBC-MD5"}, {"AttributeValue": "false", "AttributeName": "RC2-CBC-MD5"}, {"AttributeValue": "false", "AttributeName": "PSK-AES256-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "PSK-3DES-EDE-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "KRB5-DES-CBC3-SHA"}, {"AttributeValue": "false", "AttributeName": "KRB5-DES-CBC3-MD5"}, {"AttributeValue": "false", "AttributeName": "PSK-AES128-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "PSK-RC4-SHA"}, {"AttributeValue": "false", "AttributeName": "KRB5-RC4-SHA"}, {"AttributeValue": "false", "AttributeName": "KRB5-RC4-MD5"}, {"AttributeValue": "false", "AttributeName": "KRB5-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "KRB5-DES-CBC-MD5"}, {"AttributeValue": "false", "AttributeName": "EXP-EDH-RSA-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-EDH-DSS-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-ADH-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-RC2-CBC-MD5"}, {"AttributeValue": "false", "AttributeName": "EXP-KRB5-RC2-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-KRB5-DES-CBC-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-KRB5-RC2-CBC-MD5"}, {"AttributeValue": "false", "AttributeName": "EXP-KRB5-DES-CBC-MD5"}, {"AttributeValue": "false", "AttributeName": "EXP-ADH-RC4-MD5"}, {"AttributeValue": "false", "AttributeName": "EXP-RC4-MD5"}, {"AttributeValue": "false", "AttributeName": "EXP-KRB5-RC4-SHA"}, {"AttributeValue": "false", "AttributeName": "EXP-KRB5-RC4-MD5"}
]
      }
    },
    "elbSettings": {
      "format": {
        "launchConfigBaseName": "aws-lc-useast1-prod",
        "autoScalerBaseName": "aws-asg-useast1-prod",
        "loadBalancerBaseName": "aws-asg-useast1-prod",
        "launchConfiguration": { "key": "string" },
        "autoScalingConfiguration": { "key": "string" },
        "loadBalancerConfiguration":  { "key": "string" },
        "scalingPolicies": [""]
      }
    },
    "deploymentSettings": {
      "format": {
        "testImageBaseName": "aws-ami-test",
        "testInstanceBaseName": "aws-instance-test",
        "prodImageBaseName": "aws-ami-prod",
        "prodInstanceBaseName": "aws-instance-prod",
        "domainName": "example.com",
        "hostedZoneID": "ABCDEFXYZ12345",
        "sslPolicy": {
          "ssl": false,
          "certList": [""],
          "certFolderLocalPath": ""
        }
      }
    },
    "componentSettings": {
      "format": {
        "versionControl": "git",
        "repoURL": "https://username:password@bitbucket.org/projectname/componentname.git",
        "credFolderName": "cred",
        "credFolderLocalPath": "../../../componentname/",
        "credFolderRemotePath": "componentname/",
        "dockerImage": "dockerimagename",
        "composeScript": "cd componentname; sh start.sh",
        "containerAlias": "componentname",
        "containerPort": 0,
        "domainAlias": "",
        "tests": {
          "http": [ "" ],
          "internal": [""],
          "services": [""]
        }
      },
      "versionControl": [ "git", "mercurial" ]
    },
    "appSettings": {}
  },
  ".components": {
    ".instance_id": {
      "contains_either": [ "i\\-[a-f\\d]{8}", "i\\-[a-f\\d]{17}"]
    },
    ".instance_name": {
      "min_length": 3,
      "max_length": 128,
      "must_not_contain": [ "aws:", "[^\\w\\-\\._]+" ]
    },
    ".pem_file": {
      "must_contain": [ "\\w\\.pem$" ]
    },
    ".pem_name": {
      "min_length": 1,
      "max_length": 251,
      "must_not_contain": [ "[^\\w\\-]+", "^\\-", "\\-$" ]
    },
    ".tag_key": {
      "min_length": 1,
      "max_length": 255,
      "must_not_contain": [ "aws:", "[^\\w\\s\\-\\._:/]+" ]
    },
    ".tag_values": {
      "max_size": 10
    },
    ".tag_values[0]": {
      "min_length": 1,
      "max_length": 255,
      "must_not_contain": [ "aws:", "[^\\w\\s\\-\\._:/]+" ]
    },
    ".group_id": {
      "must_contain": [ "^sg\\-[a-f\\d]{8}$" ]
    },
    ".subnet_id": {
      "must_contain": [ "^subnet\\-[a-f\\d]{8}$"]
    }
  }
}